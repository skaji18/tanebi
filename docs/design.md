# TANEBIï¼ˆç¨®ç«ï¼‰è¨­è¨ˆæ›¸

---

## 1. æ€æƒ³ãƒ»è¨­è¨ˆãƒãƒªã‚·ãƒ¼

### 1.1 ã‚³ã‚¢ä¾¡å€¤ï¼šé€²åŒ–ã™ã‚‹äººæ ¼

```
ç¨® ç« â€” å°ã•ãªç«ç¨®ã‹ã‚‰ã€æ¶ˆãˆãªã„ç‚ã¸ã€‚
The spark that never dies â€” agents that grow with every task.
```

TANEBIã¯**é€²åŒ–ã™ã‚‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆäººæ ¼ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**ã§ã‚ã‚‹ã€‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã‚’é‡ã­ã‚‹ãŸã³ã«æˆé•·ãƒ»ç‰¹åŒ–ã™ã‚‹ã€Œäººæ ¼ï¼ˆPersonaï¼‰ã€ã‚’ä¸ãˆã€ãƒãƒ¼ãƒ å…¨ä½“ã‚’è¤‡åˆ©çš„ã«è³¢ãã™ã‚‹ã€‚

| å•é¡Œ | TANEBIã®è§£æ³• |
|------|-------------|
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨˜æ†¶å–ªå¤± | 4å±¤äººæ ¼ãƒ¢ãƒ‡ãƒ«ã§çŸ¥è­˜ãƒ»è¡Œå‹•ç‰¹æ€§ãƒ»å®Ÿç¸¾ã‚’æ°¸ç¶šåŒ– |
| æœ€é©é…ç½®ã®ä¸åœ¨ | é©å¿œåº¦ã‚¹ã‚³ã‚¢ã«åŸºã¥ãè‡ªå‹•ãƒãƒƒãƒãƒ³ã‚° |
| å“è³ªã®åœæ» | é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ãŒæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¼·åŒ–ã€å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¨˜éŒ² |
| çŸ¥è­˜ã®ã‚µã‚¤ãƒ­åŒ– | å…±æœ‰çŸ¥è­˜ãƒãƒ³ã‚¯ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡ºã§çµ„ç¹”å­¦ç¿’ |
| ç’°å¢ƒãƒ­ãƒƒã‚¯ã‚¤ãƒ³ | ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å±¤ã§å®Ÿè¡Œç’°å¢ƒã‚’æŠ½è±¡åŒ– |

### 1.2 ã‚³ã‚¢ã¨ã‚·ã‚§ãƒ«ã®åˆ†é›¢

TANEBIã®è¨­è¨ˆã¯**ã‚³ã‚¢ï¼ˆé€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ + Personaç®¡ç†ï¼‰ã¨ã‚·ã‚§ãƒ«ï¼ˆUI + ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼‰ã®åˆ†é›¢**ã‚’åŸå‰‡ã¨ã™ã‚‹ã€‚

- **ã‚³ã‚¢å±¤**: é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ã€Persona Lifecycle Managerã€çµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ã€‚å®Ÿè¡Œç’°å¢ƒã«ä¾å­˜ã—ãªã„ã€‚UIãŒ0å€‹ã§ã‚‚å‹•ä½œã™ã‚‹
- **ã‚·ã‚§ãƒ«å±¤**: ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼ˆå®Ÿè¡Œç’°å¢ƒæŠ½è±¡åŒ–ï¼‰ã¨ UIãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼ˆè¡¨ç¤ºãƒ»æ“ä½œï¼‰ã€‚è‡ªç”±ã«å·®ã—æ›¿ãˆãƒ»è¿½åŠ ãƒ»å‰Šé™¤å¯èƒ½

**ã‚³ã‚¢ãŒå¼·ã„ã‹ã‚‰ã“ãã‚·ã‚§ãƒ«ã‚’è‡ªç”±ã«ã§ãã‚‹ã€‚**

### 1.3 è¨­è¨ˆåŸå‰‡

| # | åŸå‰‡ | èª¬æ˜ |
|---|------|------|
| P1 | é€²åŒ–ã‚’ã‚³ã‚¢ã«ã€ä»–ã¯äº¤æ›å¯èƒ½ | é€²åŒ–ã™ã‚‹çŸ¥æ€§ã‚’æ ¸ã«æ®ãˆã‚‹ |
| P2 | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯å·®ã—æ›¿ãˆå¯èƒ½ | ä¿¡é ¼ãƒ»èªçŸ¥å·¥å­¦ãƒ»UIã¯å¾Œã‹ã‚‰å·®ã—è¾¼ã‚ã‚‹ |
| P3 | æ–¹å‘æ€§ã‚’æ—©æœŸã«çµã‚‰ãªã„ | ã©ã®æ–¹å‘ã«ã‚‚è¡Œã‘ã‚‹çŠ¶æ…‹ã‚’ç¶­æŒ |
| P4 | æ¸¬å®šã«åŸºã¥ãè¨­è¨ˆåˆ¤æ–­ | ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ãƒ™ãƒ¼ã‚¹ã®é€²åŒ– |
| P5 | äºŒé‡é€²åŒ–ï¼ˆå€‹ä½“ï¼‹çŸ¥è­˜ï¼‰ | å€‹ä½“é€²åŒ–ã¨å…±æœ‰çŸ¥è­˜é€²åŒ–ã®çµ±åˆ |

### 1.4 ã‚¼ãƒ­ã‚¤ãƒ³ãƒ•ãƒ©åŸå‰‡

```bash
git clone https://github.com/skaji18/tanebi
cd tanebi
claude
# CLAUDE.mdãŒè‡ªå‹•ãƒ­ãƒ¼ãƒ‰ â†’ TANEBIã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦èµ·å‹•
```

Claude Codeã•ãˆã‚ã‚Œã°å‹•ãã€‚tmuxä¸è¦ã€ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ä¸è¦ã€è¿½åŠ ã‚¤ãƒ³ãƒ•ãƒ©ä¸è¦ã€‚

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### 2.1 3å±¤ + çµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å±¤

```mermaid
graph TD
    subgraph UPL["Unified Plugin Layer"]
        direction LR
        subgraph CP["type: core"]
            TM["Trust Module"]
            CQ["Cognitive Quality<br/>(å°†æ¥)"]
            GM["Governance<br/>(å°†æ¥)"]
        end
        subgraph UP["type: ui"]
            PR["progress"]
            AP["approval"]
            CS["cost"]
            EV["evolution"]
            HI["history"]
        end
        PA["Plugin API<br/>(hooks + events + feedback)"]
        CP --> PA
        UP --> PA
    end

    subgraph EC["Evolution Core (Layer 2)"]
        PLM["Persona Lifecycle Manager"]
        IE["Individual Evolution<br/>Selection / Mutation / Crossover / Fitness"]
        KE["Knowledge Evolution<br/>Few-Shot Bank / Episode Memory / Pattern Extraction"]
    end

    subgraph FL["Foundation Layer (Layer 1)"]
        AIL["Adapter Interface Layer<br/>ã‚³ãƒãƒ³ãƒ‰è¨­å®šãƒ¢ãƒ‡ãƒ«ï¼ˆOutbound Port + Inbound Callbackï¼‰"]
        PS["Persona Store"]
        CEB["Core Event Bus"]
    end

    PA --> EC
    EC --> FL

    FC["Feedback Channel<br/>(UI â†’ Core)"]
    UP -.-> FC -.-> EC
```

### 2.2 å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è²¬å‹™

#### Layer 1: Foundationï¼ˆåŸºç›¤å±¤ï¼‰

å¤‰æ›´é »åº¦ãŒæœ€ã‚‚ä½ãã€ä¿¡é ¼æ€§ãŒæœ€ã‚‚é«˜ã„å±¤ã€‚

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ | claude-nativeå®Ÿè£… |
|--------------|------|------------------|
| Adapter Interface Layer | ã‚³ãƒãƒ³ãƒ‰è¨­å®šãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹Outbound Port + Inbound Callbackï¼ˆSection 8ï¼‰ | config.yamlã®ã‚³ãƒãƒ³ãƒ‰å®šç¾© + command_executor.sh |
| Persona Store | äººæ ¼YAMLã®èª­ã¿æ›¸ããƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | `personas/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª |
| Core Event Bus | ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨Evolution Coreã‚’ç–çµåˆã«æ¥ç¶š | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚° |

#### Layer 2: Evolution Coreï¼ˆé€²åŒ–ã‚³ã‚¢ï¼‰

TANEBIã®å¿ƒè‡“éƒ¨ã€‚è©³ç´°ã¯ Section 7ã€‚

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è²¬å‹™ |
|--------------|------|
| Individual Evolution | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå€‹ä½“ã®äººæ ¼é€²åŒ–ï¼ˆé¸æŠãƒ»çªç„¶å¤‰ç•°ãƒ»äº¤å‰ãƒ»é©å¿œåº¦è©•ä¾¡ï¼‰ |
| Knowledge Evolution | å…±æœ‰çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã®æˆé•·ï¼ˆFew-Shotè“„ç©ãƒ»ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜éŒ²ãƒ»çŸ¥è­˜GCï¼‰ |
| Persona Lifecycle Manager | äººæ ¼ã®ç”Ÿæˆãƒ»ã‚³ãƒ”ãƒ¼ãƒ»åˆæˆãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† |

#### Unified Plugin Layerï¼ˆçµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å±¤ï¼‰

Core Pluginã¨UI Pluginã‚’çµ±ä¸€ã—ãŸè¦ç´„ã§ç®¡ç†ã™ã‚‹ã€‚è©³ç´°ã¯ Section 3ã€‚

---

## 3. çµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### 3.1 å…±é€šã®Pluginè¦ç´„

å…¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ `type` ã«é–¢ã‚ã‚‰ãšã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã¨è¦ç´„ã«å¾“ã†ã€‚

#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
plugins/
â”œâ”€â”€ trust/                  # type: core
â”‚   â”œâ”€â”€ plugin.yaml         # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å®šç¾©ï¼ˆå¿…é ˆï¼‰
â”‚   â”œâ”€â”€ handler.sh          # ãƒ•ãƒƒã‚¯/ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ï¼ˆå¿…é ˆï¼‰
â”‚   â””â”€â”€ config.yaml         # è¨­å®šï¼ˆä»»æ„ï¼‰
â”œâ”€â”€ progress/               # type: ui
â”‚   â”œâ”€â”€ plugin.yaml
â”‚   â”œâ”€â”€ handler.sh
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ approval/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ cost/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ evolution/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ history/
â”‚   â””â”€â”€ ...
â””â”€â”€ _template/              # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    â”œâ”€â”€ plugin.yaml
    â””â”€â”€ handler.sh
```

#### plugin.yamlï¼ˆå¿…é ˆï¼‰

```yaml
plugin:
  name: "plugin_name"              # ä¸€æ„ã®åå‰ [a-z_]+
  version: "1.0.0"                 # ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  type: core                       # core | ui
  description: "1è¡Œã®èª¬æ˜"

  subscribes_to:                   # è³¼èª­ã™ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆ
    - event_type: "worker.completed"
      handler: "on_worker_done"    # handler.shå†…ã®é–¢æ•°å

  feedback_commands: []            # UI â†’ Core ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆtype: ui ã®ã¿ï¼‰

  lifecycle:
    on_init: "init"                # åˆæœŸåŒ–
    on_event: "handle_event"       # ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡
    on_destroy: "cleanup"          # çµ‚äº†å‡¦ç†

  # type: core ã®ã¿
  hooks:                           # ã‚³ã‚¢å‡¦ç†ã¸ã®ä»‹å…¥ãƒã‚¤ãƒ³ãƒˆ
    on_task_assign: "check_trust"  # allow/deny æ¨©é™ã‚ã‚Š
    on_task_complete: "update_score"

  # type: ui ã®ã¿
  display:
    type: terminal                 # terminal | file | web
    refresh_mode: event_driven     # event_driven | polling | manual
```

#### handler.shï¼ˆå¿…é ˆï¼‰

```bash
#!/usr/bin/env bash

init() {
  echo "[$(basename "$(dirname "$0")")] initialized"
}

handle_event() {
  local event_type="$1"
  local event_file="$2"
  # ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
}

cleanup() {
  :
}
```

#### config.yaml ã§ã®æœ‰åŠ¹/ç„¡åŠ¹åˆ‡ã‚Šæ›¿ãˆ

```yaml
# config.yaml
tanebi:
  plugins:
    trust:
      enabled: true
    progress:
      enabled: true
    approval:
      enabled: true
      plan_review: true
      wave_gate: false
    cost:
      enabled: false
    evolution:
      enabled: true
    history:
      enabled: false
```

### 3.2 type: coreï¼ˆCore Pluginï¼‰

Core Pluginã¯ã‚¿ã‚¹ã‚¯å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã«**ä»‹å…¥**ã§ãã‚‹ã€‚

| æ¨©é™ | èª¬æ˜ |
|------|------|
| allow/deny | `on_task_assign` ãƒ•ãƒƒã‚¯ã§ã‚¿ã‚¹ã‚¯å‰²ã‚Šå½“ã¦ã‚’ãƒ–ãƒ­ãƒƒã‚¯å¯èƒ½ |
| on_task_complete | ã‚¿ã‚¹ã‚¯å®Œäº†å¾Œã«ã‚¹ã‚³ã‚¢æ›´æ–°ç­‰ã®å‡¦ç†ã‚’å®Ÿè¡Œ |
| on_session_start | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«åˆ¶ç´„ã‚’æ³¨å…¥ |

**ä»‹å…¥ã®ä»•çµ„ã¿**: Core Pluginã®ãƒ•ãƒƒã‚¯ã¯ exit code ã§åˆ¤å®šã™ã‚‹ã€‚exit 0 = allowã€exit 1 = denyã€‚denyæ™‚ã¯ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒä»£æ›¿ç­–ã‚’å®Ÿè¡Œã™ã‚‹ã€‚

**ç¾åœ¨ã®Core Plugin**:
- **Trust Module**: ä¿¡é ¼ã‚¹ã‚³ã‚¢ã«åŸºã¥ãæ®µéšçš„æ¨©é™å§”è­²ï¼ˆSection 5.1ï¼‰

**å°†æ¥ã®Core Pluginå€™è£œ**:
- Cognitive Quality Module: æ³¨æ„å“è³ªç®¡ç†ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåŠ£åŒ–æ¤œçŸ¥
- Governance Module: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®åˆæ„å½¢æˆ

### 3.3 type: uiï¼ˆUI Pluginï¼‰

UI Pluginã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è³¼èª­ã—ã¦è¡¨ç¤ºãƒ»æ“ä½œã‚’è¡Œã†ã€‚ã‚³ã‚¢ã®å†…éƒ¨å®Ÿè£…ã‚’çŸ¥ã‚‰ãªã„ã€‚

| æ¨©é™ | èª¬æ˜ |
|------|------|
| ã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­ | Core Event Bus ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã—è¡¨ç¤º |
| Feedback Channel | ã‚³ã‚¢ã«ææ¡ˆã§ãã‚‹ãŒ**æ‹’å¦æ¨©ãªã—** |

**Feedback Channel**: UIã‹ã‚‰ã‚³ã‚¢ã¸ã®å”¯ä¸€ã®é€†æ–¹å‘çµŒè·¯ã€‚å‹å®‰å…¨ãªã‚³ãƒãƒ³ãƒ‰ã®ã¿é€šéã™ã‚‹ã€‚

```bash
# handler.shå†…ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡
tanebi_feedback "approve_plan" '{"approved": true}'
```

**ç¾åœ¨ã®UI Plugin**:
- progress / approval / cost / evolution / historyï¼ˆSection 5.2ã€œ5.6ï¼‰

### 3.4 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ on_init  â”‚ â† TANEBIèµ·å‹•æ™‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event Loop      â”‚ â† Core Event Busã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡
â”‚  on_event(t, f)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  (TANEBIåœæ­¢æ™‚)
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ on_destroy â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Core Pluginã¯Event Loopã«åŠ ãˆã€hooksãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§å®šç¾©ã•ã‚ŒãŸãƒ•ãƒƒã‚¯ãŒã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ç›´æ¥å‘¼ã³å‡ºã•ã‚Œã‚‹ã€‚

---

## 4. ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 4.1 è¨­è¨ˆæ€æƒ³

TANEBIã¯ã‚¤ãƒ™ãƒ³ãƒˆã®**æ¶ˆè²»è€…**ã§ã‚ã‚‹ã€‚

- **ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒ**ï¼ˆåå‰ãƒ»ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰æ§‹é€ ï¼‰ã¯TANEBIãŒå®šç¾©ã™ã‚‹
- **èª°ãŒãƒ»ã©ã†ã‚„ã£ã¦ç™ºç«ã™ã‚‹ã‹**ã¯ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®è²¬å‹™
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®Ÿè£…**ï¼ˆ`scripts/emit_event.sh`ï¼‰ã¯æä¾›ã™ã‚‹ãŒã€å·®ã—æ›¿ãˆå¯èƒ½
- **transportå±¤**ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«/Redis/WebSocketç­‰ï¼‰ã¯é–¢çŸ¥ã—ãªã„

### 4.2 ã‚¤ãƒ™ãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°

#### ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ |
|-----------|--------------|-----------|
| `task.created` | `new_cmd.sh` å®Ÿè¡Œå¾Œ | `{ cmd_id, request_summary, timestamp }` |
| `task.decomposed` | Decomposerå®Œäº†å¾Œ | `{ cmd_id, plan: { subtasks[], waves, persona_assignments[] } }` |
| `worker.started` | Workerèµ·å‹•æ™‚ | `{ cmd_id, subtask_id, persona_id, wave }` |
| `worker.progress` | Workerä¸­é–“å‡ºåŠ›æ™‚ | `{ cmd_id, subtask_id, message, percent? }` |
| `worker.completed` | Workerå®Œäº†æ™‚ | `{ cmd_id, subtask_id, status, quality, domain }` |
| `wave.completed` | Waveå†…å…¨Workerå®Œäº† | `{ cmd_id, wave, results_summary }` |
| `task.aggregated` | Aggregatorå®Œäº†å¾Œ | `{ cmd_id, report_path, quality_summary }` |

#### é€²åŒ–ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ |
|-----------|--------------|-----------|
| `evolution.started` | evolve.shé–‹å§‹æ™‚ | `{ cmd_id }` |
| `evolution.persona_updated` | Personaæ›´æ–°æ™‚ | `{ persona_id, field, old_value, new_value, reason }` |
| `evolution.few_shot_registered` | Few-Shotç™»éŒ²æ™‚ | `{ domain, subtask_id, quality }` |
| `evolution.completed` | evolve.shå®Œäº†æ™‚ | `{ cmd_id, personas_updated[], few_shots_added }` |

#### ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆå | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ |
|-----------|--------------|-----------|
| `trust.check` | Trust Moduleåˆ¤å®šæ™‚ | `{ persona_id, task_risk, decision: allow/deny }` |
| `cost.token_used` | ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»æ¨å®šæ™‚ | `{ cmd_id, subtask_id?, tokens_estimated }` |
| `error.worker_failed` | Workerå¤±æ•—æ™‚ | `{ cmd_id, subtask_id, error_detail }` |
| `approval.requested` | æ‰¿èªå¾…ã¡æ™‚ | `{ cmd_id, approval_type, data, timeout_seconds? }` |

### 4.3 ã‚¤ãƒ™ãƒ³ãƒˆãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ¼ãƒ

```yaml
# events/schema.yaml
events:
  task.created:
    cmd_id: string
    request_summary: string
    timestamp: string         # ISO8601

  task.decomposed:
    cmd_id: string
    plan:
      subtasks: array
      waves: integer
      persona_assignments: array

  worker.completed:
    cmd_id: string
    subtask_id: string
    status: enum[success, failure]
    quality: enum[GREEN, YELLOW, RED]
    domain: string

  evolution.persona_updated:
    persona_id: string
    field: string             # e.g. "behavior.risk_tolerance"
    old_value: number
    new_value: number
    reason: string

  approval.requested:
    cmd_id: string
    approval_type: enum[plan_review, wave_gate, danger_op, budget_exceeded]
    data: object
    timeout_seconds: number?  # null = ç„¡æœŸé™
```

### 4.4 Core Event Bus å®Ÿè£…ï¼ˆclaude-nativeï¼‰

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚

```
work/cmd_NNN/events/
â”œâ”€â”€ 001_task.created.yaml
â”œâ”€â”€ 002_task.decomposed.yaml
â”œâ”€â”€ 003_worker.started.yaml
â”œâ”€â”€ ...
â””â”€â”€ 015_evolution.completed.yaml
```

å„ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:

```yaml
event:
  id: "evt_003"
  type: "worker.started"
  timestamp: "2026-03-01T12:05:00Z"
  payload:
    cmd_id: "cmd_001"
    subtask_id: "subtask_001"
    persona_id: "backend_specialist_v2"
    wave: 1
```

ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«:

```bash
bash scripts/emit_event.sh <cmd_dir> <event_type> '<payload_yaml>'
```

### 4.5 Feedback Channel

UIã‹ã‚‰ã‚³ã‚¢ã¸ã®é€†æ–¹å‘é€šä¿¡ã€‚

#### è¨±å¯ã•ã‚Œã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | é€ä¿¡å…ƒ | ã‚³ã‚¢ã®å¿œç­” |
|---------|--------|----------|
| `approve_plan` | approval | Executeé–‹å§‹ |
| `reject_plan` | approval | ä¿®æ­£æŒ‡ç¤ºä»˜ãã§å†Decompose |
| `modify_plan` | approval | ã‚µãƒ–ã‚¿ã‚¹ã‚¯è¿½åŠ /å‰Šé™¤/å¤‰æ›´ |
| `approve_wave` | approval | æ¬¡Waveé–‹å§‹ |
| `abort_task` | approval | ã‚¿ã‚¹ã‚¯å…¨ä½“ã‚’ä¸­æ­¢ |
| `adjust_parameter` | evolution | è¡Œå‹•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ‰‹å‹•èª¿æ•´ |

#### Feedback Channel å®Ÿè£…ï¼ˆclaude-nativeï¼‰

```
work/cmd_NNN/feedback/
â”œâ”€â”€ fb_001_approve_plan.yaml
â””â”€â”€ fb_002_approve_wave.yaml
```

```yaml
feedback:
  id: "fb_001"
  command: "approve_plan"
  timestamp: "2026-03-01T12:06:00Z"
  source_component: "approval"
  payload:
    approved: true
    modifications: []
```

claude-nativeã§ã¯Claude Codeã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾è©±ãƒ•ãƒ­ãƒ¼ã‚’Feedback Channelã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚

---

## 5. å„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä»•æ§˜

### 5.1 Trust Module (type: core)

ä¿¡é ¼ã‚¹ã‚³ã‚¢ã«åŸºã¥ãæ®µéšçš„æ¨©é™å§”è­²ã€‚

#### plugin.yaml

```yaml
plugin:
  name: "trust"
  version: "1.0.0"
  type: core
  description: "ä¿¡é ¼ã‚¹ã‚³ã‚¢ã«åŸºã¥ãæ®µéšçš„æ¨©é™å§”è­²"

  subscribes_to:
    - event_type: "trust.check"
      handler: "log_trust_decision"

  lifecycle:
    on_init: "on_init"
    on_event: "handle_event"
    on_destroy: "cleanup"

  hooks:
    on_task_assign: "on_task_assign"
    on_task_complete: "on_task_complete"
```

#### handlerå‹•ä½œ

| ãƒ•ãƒƒã‚¯ | å…¥åŠ› | å‹•ä½œ | å‡ºåŠ› |
|--------|------|------|------|
| `on_init` | persona_yaml_path | trust_scoreãŒæœªè¨­å®šãªã‚‰50ã§åˆæœŸåŒ– | exit 0 |
| `on_task_assign` | persona_id, risk_level | trust_score < 30 ã‹ã¤ high-risk â†’ deny | exit 0 (allow) / exit 1 (deny) |
| `on_task_complete` | persona_id, status, quality | ã‚¹ã‚³ã‚¢æ›´æ–°: GREEN +5, YELLOW +2, failure -10 | exit 0 |

#### ä¿¡é ¼ã‚¹ã‚³ã‚¢ã®æ›´æ–°ãƒ«ãƒ¼ãƒ«

| çµæœ | delta |
|------|-------|
| success + GREEN | +5 |
| success + YELLOW | +2 |
| success + RED | +0 |
| failure | -10 |

ã‚¹ã‚³ã‚¢ç¯„å›²: 0ã€œ100ã€‚åˆæœŸå€¤: 50ã€‚

### 5.2 progress (type: ui)

Workerå®Ÿè¡ŒçŠ¶æ³ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã€‚

#### plugin.yaml

```yaml
plugin:
  name: "progress"
  version: "1.0.0"
  type: ui
  description: "Workerå®Ÿè¡ŒçŠ¶æ³ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º"

  subscribes_to:
    - event_type: "task.decomposed"
      handler: "show_plan_summary"
    - event_type: "worker.started"
      handler: "mark_worker_active"
    - event_type: "worker.progress"
      handler: "update_worker_status"
    - event_type: "worker.completed"
      handler: "mark_worker_done"
    - event_type: "wave.completed"
      handler: "show_wave_summary"
    - event_type: "task.aggregated"
      handler: "show_final_summary"
    - event_type: "error.worker_failed"
      handler: "mark_worker_failed"

  feedback_commands: []

  display:
    type: terminal
    refresh_mode: event_driven
```

#### è¡¨ç¤ºä¾‹

```
â”â”â” TANEBI Progress: cmd_015 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Wave 1/3 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
  âœ… subtask_001 (backend_specialist_v2) â€” GREEN
  âœ… subtask_002 (api_designer_v1)      â€” GREEN

Wave 2/3 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  40%
  ğŸ”„ subtask_004 (test_writer_v1)       â€” in progress
  â³ subtask_006 (docs_seed_v1)         â€” queued

Wave 3/3 â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  waiting
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

#### è¨­å®šé …ç›®

| é …ç›® | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | è¨­å®šæ–¹æ³• |
|------|----------|---------|
| å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ†ãƒ¼ãƒ–ãƒ« | `plugins/progress/config.yaml` |
| è¡¨ç¤ºã™ã‚‹æƒ…å ± | å…¨ã‚µãƒ–ã‚¿ã‚¹ã‚¯ | filterè¨­å®šã§çµã‚Šè¾¼ã¿ |
| æ›´æ–°é »åº¦ | ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹• | polling ã«å¤‰æ›´å¯ |

### 5.3 approval (type: ui)

è¨ˆç”»æ‰¿èªã‚²ãƒ¼ãƒˆã¨å®Ÿè¡Œä¸­ã®ä»‹å…¥ãƒã‚¤ãƒ³ãƒˆã€‚

#### plugin.yaml

```yaml
plugin:
  name: "approval"
  version: "1.0.0"
  type: ui
  description: "è¨ˆç”»æ‰¿èªã‚²ãƒ¼ãƒˆã¨å®Ÿè¡Œä¸­ä»‹å…¥ãƒã‚¤ãƒ³ãƒˆ"

  subscribes_to:
    - event_type: "task.decomposed"
      handler: "present_plan_for_approval"
    - event_type: "wave.completed"
      handler: "wave_gate_check"
    - event_type: "trust.check"
      handler: "show_trust_decision"
    - event_type: "approval.requested"
      handler: "handle_approval_request"

  feedback_commands:
    - command: "approve_plan"
      payload_schema: { approved: boolean, modifications: array? }
    - command: "reject_plan"
      payload_schema: { reason: string, retry: boolean }
    - command: "modify_plan"
      payload_schema: { changes: array }
    - command: "approve_wave"
      payload_schema: { wave: number, approved: boolean }
    - command: "abort_task"
      payload_schema: { reason: string }

  display:
    type: terminal
    refresh_mode: event_driven
```

#### è¨ˆç”»æ‰¿èªã‚²ãƒ¼ãƒˆè¡¨ç¤ºä¾‹

```
â”â”â” TANEBI Plan Review: cmd_015 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ å®Ÿè¡Œè¨ˆç”»:

| # | ã‚µãƒ–ã‚¿ã‚¹ã‚¯ | Persona | Fitness | Wave |
|---|-----------|---------|---------|------|
| 1 | APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£… | backend_specialist_v2 | 0.82 | 1 |
| 2 | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ | test_writer_v1 | 0.75 | 2 |

æ‰¿èªã—ã¾ã™ã‹ï¼Ÿ [Y / n / modify]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

#### è¨­å®šé …ç›®

| é …ç›® | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | è¨­å®šã‚­ãƒ¼ |
|------|----------|---------|
| è¨ˆç”»æ‰¿èª | æœ‰åŠ¹ | `plugins.approval.plan_review` |
| Waveé–“ã‚²ãƒ¼ãƒˆ | ç„¡åŠ¹ | `plugins.approval.wave_gate` |
| æ‰¿èªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ç„¡æœŸé™ | `plugins.approval.timeout_seconds` |
| å±é™ºæ“ä½œç¢ºèª | æœ‰åŠ¹ | `plugins.approval.danger_op_confirm` |

### 5.4 cost (type: ui)

ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã¨è¡¨ç¤ºã€‚

#### plugin.yaml

```yaml
plugin:
  name: "cost"
  version: "1.0.0"
  type: ui
  description: "ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã¨è¡¨ç¤º"

  subscribes_to:
    - event_type: "cost.token_used"
      handler: "accumulate_cost"
    - event_type: "worker.completed"
      handler: "finalize_subtask_cost"
    - event_type: "task.aggregated"
      handler: "show_task_cost_summary"
    - event_type: "evolution.completed"
      handler: "finalize_evolution_cost"

  feedback_commands:
    - command: "adjust_parameter"
      payload_schema: { key: "cost_budget", value: number }

  display:
    type: terminal
    refresh_mode: event_driven
```

#### ã‚³ã‚¹ãƒˆã‚µãƒãƒªãƒ¼è¡¨ç¤ºä¾‹

```
â”â”â” TANEBI Cost Report: cmd_015 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Token Usage (estimated):
  Decompose:  ~1,200 tokens
  Workers:    ~8,500 tokens
  Aggregate:  ~1,500 tokens
  Evolve:     ~300 tokens
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total:      ~11,500 tokens

Cumulative (this session): ~45,200 tokens
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

#### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

```yaml
# work/cmd_NNN/cost.yaml
cost:
  cmd_id: "cmd_015"
  timestamp: "2026-03-01T12:30:00Z"
  breakdown:
    decompose: 1200
    workers:
      subtask_001: 2800
      subtask_002: 2200
    aggregate: 1500
    evolve: 300
  total: 11500
```

#### è¨­å®šé …ç›®

| é …ç›® | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | è¨­å®šã‚­ãƒ¼ |
|------|----------|---------|
| äºˆç®—ä¸Šé™ | ç„¡åˆ¶é™ | `plugins.cost.budget` |
| ã‚µãƒ–ã‚¿ã‚¹ã‚¯åˆ¥è¡¨ç¤º | æœ‰åŠ¹ | `plugins.cost.show_per_subtask` |
| ç´¯è¨ˆé›†è¨ˆ | æœ‰åŠ¹ | `plugins.cost.show_cumulative` |

### 5.5 evolution (type: ui)

Personaé€²åŒ–çŠ¶æ³ãƒ»fitnessæ¨ç§»ã®å¯è¦–åŒ–ã€‚

#### plugin.yaml

```yaml
plugin:
  name: "evolution"
  version: "1.0.0"
  type: ui
  description: "Personaé€²åŒ–çŠ¶æ³ãƒ»fitnessæ¨ç§»ã®å¯è¦–åŒ–"

  subscribes_to:
    - event_type: "evolution.started"
      handler: "show_evolution_start"
    - event_type: "evolution.persona_updated"
      handler: "show_persona_change"
    - event_type: "evolution.few_shot_registered"
      handler: "show_few_shot_update"
    - event_type: "evolution.completed"
      handler: "show_evolution_summary"

  feedback_commands:
    - command: "adjust_parameter"
      payload_schema: { persona_id: string, field: string, value: number }

  display:
    type: terminal
    refresh_mode: event_driven
```

#### é€²åŒ–ã‚µãƒãƒªãƒ¼è¡¨ç¤ºä¾‹

```
â”â”â” TANEBI Evolution Report: cmd_015 â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Persona Updates:

  backend_specialist_v2:
    fitness:    0.80 â†’ 0.82 (+0.02)
    tasks:      55 â†’ 57
    success:    0.87 â†’ 0.89
    streak:     3 â†’ 5
    â–¸ reinforced: detail_orientation +0.05

Few-Shot Bank:
    + backend/subtask_001 (GREEN) â†’ registered
    Bank size: backend=12, testing=8, frontend=3
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

#### è¨­å®šé …ç›®

| é …ç›® | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | è¨­å®šã‚­ãƒ¼ |
|------|----------|---------|
| å®Œäº†æ™‚ã‚µãƒãƒªãƒ¼è¡¨ç¤º | æœ‰åŠ¹ | `plugins.evolution.show_on_complete` |
| è©³ç´°è¡¨ç¤º | ç„¡åŠ¹ | `plugins.evolution.verbose` |
| fitnessæ¨ç§»è¡¨ç¤º | ç„¡åŠ¹ | `plugins.evolution.show_fitness_trend` |

### 5.6 history (type: ui)

éå»ã‚¿ã‚¹ã‚¯ã®æ¤œç´¢ãƒ»é–²è¦§ã€‚

#### plugin.yaml

```yaml
plugin:
  name: "history"
  version: "1.0.0"
  type: ui
  description: "éå»ã‚¿ã‚¹ã‚¯ã®æ¤œç´¢ãƒ»é–²è¦§"

  subscribes_to:
    - event_type: "task.aggregated"
      handler: "index_completed_task"

  feedback_commands: []

  display:
    type: terminal
    refresh_mode: manual
```

#### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«

```yaml
# work/index.yaml
tasks:
  - cmd_id: "cmd_015"
    date: "2026-03-01"
    request_summary: "APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…"
    total_subtasks: 4
    succeeded: 4
    quality_summary: { GREEN: 3, YELLOW: 1, RED: 0 }
    domains: [backend, testing, docs]
    personas_used: [backend_specialist_v2, test_writer_v1, docs_seed_v1]
    cost_tokens: 11500
    report_path: "work/cmd_015/report.md"
```

#### CLIã‚¢ã‚¯ã‚»ã‚¹

```bash
tanebi history              # ç›´è¿‘ã‚¿ã‚¹ã‚¯ä¸€è¦§
tanebi history cmd_015      # ç‰¹å®šã‚¿ã‚¹ã‚¯è©³ç´°
tanebi history --domain backend  # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ•ã‚£ãƒ«ã‚¿
```

---

## 6. Persona 4å±¤ãƒ¢ãƒ‡ãƒ«

### 6.1 4å±¤æ§‹é€ 

```mermaid
graph TD
    L4["Layer 4: Identityï¼ˆåŒä¸€æ€§ï¼‰<br/>åå‰ãƒ»å£èª¿ãƒ»ã‚¢ãƒ¼ã‚­ã‚¿ã‚¤ãƒ—ãƒ»ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«<br/>å¤‰æ›´é »åº¦: æœˆå˜ä½"]
    L3["Layer 3: Knowledgeï¼ˆçŸ¥è­˜ï¼‰<br/>ãƒ‰ãƒ¡ã‚¤ãƒ³ç¿’ç†Ÿåº¦ãƒ»Few-Shotäº‹ä¾‹ãƒ»ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³<br/>å¤‰æ›´é »åº¦: ã‚¿ã‚¹ã‚¯æ¯"]
    L2["Layer 2: Behaviorï¼ˆè¡Œå‹•ç‰¹æ€§ï¼‰<br/>ãƒªã‚¹ã‚¯è¨±å®¹åº¦ãƒ»è©³ç´°å¿—å‘åº¦ãƒ»é€Ÿåº¦vså“è³ª<br/>å¤‰æ›´é »åº¦: æ•°ã‚¿ã‚¹ã‚¯æ¯"]
    L1["Layer 1: Performanceï¼ˆå®Ÿç¸¾ï¼‰<br/>ä¿¡é ¼ã‚¹ã‚³ã‚¢ãƒ»æˆåŠŸç‡ãƒ»å“è³ªå¹³å‡ãƒ»é€£å‹è¨˜éŒ²<br/>å¤‰æ›´é »åº¦: ã‚¿ã‚¹ã‚¯æ¯"]

    L4 --> L3 --> L2 --> L1

    style L4 fill:#4a90d9,color:#fff
    style L3 fill:#7ab648,color:#fff
    style L2 fill:#f5a623,color:#fff
    style L1 fill:#d0021b,color:#fff
```

### 6.2 Persona YAMLã‚¹ã‚­ãƒ¼ãƒ

```yaml
# personas/active/agent_alpha_v3.yaml
persona:
  id: "agent_alpha_v3"
  base_model: "claude-sonnet-4-6"
  version: 3
  created_at: "2026-03-01T12:00:00"
  parent_version: "agent_alpha_v2"
  lineage: ["agent_alpha_v1", "agent_alpha_v2"]

  # Layer 4: Identityï¼ˆåŒä¸€æ€§ï¼‰
  identity:
    name: "é‰„å£ã®DBè·äºº"
    speech_style: "å†·é™æ²ˆç€"
    archetype: specialist     # specialist | generalist | hybrid
    origin: evolved           # seeded | copied | merged | evolved

  # Layer 3: Knowledgeï¼ˆçŸ¥è­˜ï¼‰
  knowledge:
    domains:
      - name: database_design
        proficiency: 0.87     # 0.0ã€œ1.0
        task_count: 42
        last_updated: "2026-03-15"
      - name: api_design
        proficiency: 0.65
        task_count: 15
        last_updated: "2026-03-10"
    few_shot_refs:
      - "episodic:db:task042_migration_success"
      - "episodic:db:task067_index_optimization"
    anti_patterns:
      - pattern: "N+1ã‚¯ã‚¨ãƒªã®è¦‹è½ã¨ã—"
        detected_count: 3
        correction: "JOINã¾ãŸã¯eager loadã‚’æ˜ç¤ºçš„ã«æ¤œè¨"

  # Layer 2: Behaviorï¼ˆè¡Œå‹•ç‰¹æ€§ï¼‰
  behavior:
    risk_tolerance: 0.4       # 0=ä¿å®ˆçš„, 1=ç©æ¥µçš„
    detail_orientation: 0.85  # 0=æ¦‚ç•¥é‡è¦–, 1=ç´°éƒ¨é‡è¦–
    speed_vs_quality: 0.3     # 0=å“è³ªæœ€å„ªå…ˆ, 1=é€Ÿåº¦æœ€å„ªå…ˆ
    autonomy_preference: 0.6
    communication_density: 0.7

  # Layer 1: Performanceï¼ˆå®Ÿç¸¾ï¼‰
  performance:
    trust_score: 72           # 0-100, Trust Moduleç®¡ç†
    total_tasks: 57
    success_rate: 0.89
    avg_quality: GREEN
    specialization_index: 0.75
    streak:
      current: 5
      best: 12
    domain_success_rates:
      database_design: 0.95
      api_design: 0.80
      frontend: 0.45

  # Evolution Metadata
  evolution:
    generation: 3
    fitness_score: 0.82
    last_evolution_event:
      type: trait_reinforcement
      field: detail_orientation
      delta: +0.05
      trigger: "task_089: è©³ç´°ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§å“è³ªå‘ä¸Šã‚’ç¢ºèª"
      timestamp: "2026-03-15T14:00:00"
    mutations_log:
      - { gen: 1, type: seed, note: "åˆæœŸã‚·ãƒ¼ãƒ‰" }
      - { gen: 2, type: reinforcement, field: "database_design.proficiency", delta: +0.12 }
      - { gen: 3, type: reinforcement, field: "detail_orientation", delta: +0.05 }
    crossover_history: []
```

### 6.3 ç²’åº¦ã®å®šç¾©

| ç²’åº¦ | ç”¨é€” | å«ã‚€å±¤ | ã‚µã‚¤ã‚ºç›®å®‰ |
|------|------|-------|----------|
| **Full** | å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ç§»æ¤ | Layer 1-4 å…¨ã¦ + Evolution Metadata | ~200è¡Œ YAML |
| **Portable** | ä»–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ã‚³ãƒ”ãƒ¼ãƒ»åˆæˆ | Layer 2-4ï¼ˆPerformanceé™¤å¤–ï¼‰ | ~100è¡Œ YAML |
| **Seed** | æ–°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆæœŸåŒ–ç”¨ | Layer 4 + BehavioråˆæœŸå€¤ã®ã¿ | ~30è¡Œ YAML |

Portableç²’åº¦ãŒPerformanceã‚’é™¤å¤–ã™ã‚‹ç†ç”±: ä¿¡é ¼ã‚¹ã‚³ã‚¢ã‚„æˆåŠŸç‡ã¯ã€Œãã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒãã®ç’°å¢ƒã§ç©ã‚“ã å®Ÿç¸¾ã€ã§ã‚ã‚Šã€åˆ¥ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚³ãƒ”ãƒ¼ã™ã¹ãã§ãªã„ã€‚

### 6.4 ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£æ“ä½œ

| æ“ä½œ | èª¬æ˜ |
|------|------|
| **Copyï¼ˆCloneï¼‰** | Portableç²’åº¦ã§è¤‡è£½ã€‚Performanceã¯ç™½ç´™ã‚¹ã‚¿ãƒ¼ãƒˆ |
| **Merge** | 2ä½“ã®äººæ ¼ã‚’åŠ é‡çµåˆã—æ–°ã—ã„äººæ ¼ã‚’ç”Ÿæˆï¼ˆéç ´å£Šæ“ä½œï¼‰ |
| **Snapshot** | Fullç²’åº¦ã§`personas/history/`ã«ä¿å­˜ã€‚5ã‚¿ã‚¹ã‚¯ã”ã¨ã«è‡ªå‹•å®Ÿè¡Œ |
| **Restore** | ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰Personaã‚’å¾©å…ƒ |
| **Library** | `personas/library/`ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ/ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’è“„ç© |

---

## 7. é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³

### 7.1 äºŒé‡é€²åŒ–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph LR
    subgraph DualEvo["äºŒé‡é€²åŒ–"]
        subgraph IE["Individual Evolutionï¼ˆå€‹ä½“ï¼‰"]
            IE_ops["Selection / Mutation<br/>Crossover / Fitness Eval"]
        end
        subgraph KE["Knowledge Evolutionï¼ˆçŸ¥è­˜ï¼‰"]
            KE_ops["Few-Shot Bank<br/>Episode Memory<br/>Knowledge GC<br/>Pattern Extraction"]
        end
        IE_ops -- "æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ â†’" --> KE_ops
        KE_ops -- "â† çŸ¥è­˜ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯" --> IE_ops
    end
    TC["ã‚¿ã‚¹ã‚¯å®Œäº†"] --> IE_ops
    TC --> KE_ops
```

**çµ±åˆã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **:

1. **ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚**ï¼ˆæ¯å›ï¼‰: Persona YAMLæ›´æ–° + Few-Shot Bankç™»éŒ²
2. **æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡ºæ™‚**: ç‰¹æ€§ã®reinforcement + å…±æœ‰çŸ¥è­˜ã«è¿½åŠ 
3. **å¤±æ•—æ¤œå‡ºæ™‚**: ç‰¹æ€§ã®correction + anti_patternè¿½åŠ  + ãƒã‚¬ãƒ†ã‚£ãƒ–äº‹ä¾‹ç™»éŒ²
4. **æœˆæ¬¡é€²åŒ–ã‚¤ãƒ™ãƒ³ãƒˆ**: ãƒˆãƒƒãƒ—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã®Crossover + ä¸–ä»£åˆ¥GC

### 7.2 é©å¿œåº¦é–¢æ•°

```yaml
fitness_function:
  formula: |
    fitness = w1 * quality_score + w2 * completion_rate + w3 * efficiency + w4 * growth_rate

  weights:
    w1: 0.35    # å“è³ªã‚¹ã‚³ã‚¢ï¼ˆGREEN=1.0, YELLOW=0.5, RED=0.0ï¼‰
    w2: 0.30    # ã‚¿ã‚¹ã‚¯å®Œäº†ç‡
    w3: 0.20    # åŠ¹ç‡ï¼ˆduration_estimate: short=1.0, medium=0.7, long=0.4ï¼‰
    w4: 0.15    # æˆé•·ç‡ï¼ˆç›´è¿‘ã‚¿ã‚¹ã‚¯ã®å‰åŠå¾ŒåŠå“è³ªæ¯”è¼ƒï¼‰

  window: 20    # ç›´è¿‘20ã‚¿ã‚¹ã‚¯ã®ã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
```

å®Ÿè£…: `scripts/_fitness.py` ã® `calculate_fitness()` é–¢æ•°ã€‚`work/cmd_*/results/*.md` ã®YAML frontmatterã‹ã‚‰ã‚¿ã‚¹ã‚¯å±¥æ­´ã‚’åé›†ã—ã€ã‚¹ãƒ©ã‚¤ãƒ‡ã‚£ãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§è¨ˆç®—ã™ã‚‹ã€‚

### 7.3 Few-Shot Bank

æˆåŠŸäº‹ä¾‹ã‚’è‡ªå‹•è“„ç©ã—ã€Workerã«æ³¨å…¥ã™ã‚‹å…±æœ‰çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã€‚

```
knowledge/few_shot_bank/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ task042_migration_success.md
â”‚   â””â”€â”€ task067_index_optimization.md
â”œâ”€â”€ testing/
â”‚   â””â”€â”€ task055_e2e_pattern.md
â””â”€â”€ frontend/
    â””â”€â”€ task030_component_design.md
```

- **è‡ªå‹•ç™»éŒ²æ¡ä»¶**: status=success ã‹ã¤ quality=GREEN
- **ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ãŸã‚Šä¸Šé™**: config.yamlã§è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ20ä»¶ï¼‰
- **Workeræ³¨å…¥**: DecomposerãŒã‚µãƒ–ã‚¿ã‚¹ã‚¯ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«åŸºã¥ãé–¢é€£Few-Shotã‚’é¸æŠã—ã€Workerãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«æ³¨å…¥

### 7.4 Personaè‡ªå‹•æ›´æ–°ãƒ•ãƒ­ãƒ¼

`evolve.sh` ãŒå®Ÿè¡Œã™ã‚‹6æ®µéšã®é€²åŒ–ã‚¹ãƒ†ãƒƒãƒ—:

| # | ã‚¹ãƒ†ãƒƒãƒ— | å¯¾è±¡ | èª¬æ˜ |
|---|---------|------|------|
| 1 | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ›´æ–° | `performance` | `total_tasks`, `success_rate`, `last_task_date` ã‚’æ›´æ–° |
| 2 | å¤±æ•—è£œæ­£ | `knowledge.domains` | å¤±æ•—ãƒ‰ãƒ¡ã‚¤ãƒ³ã® `proficiency` ã‚’ -0.02 èª¿æ•´ |
| 3 | è¡Œå‹•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ | `behavior` | GREEN/REDå“è³ªã«åŸºã¥ã `risk_tolerance` ã‚’å¾®èª¿æ•´ |
| 4 | é©å¿œåº¦ã‚¹ã‚³ã‚¢è¨ˆç®— | `evolution.fitness_score` | `_fitness.py` ã§è¨ˆç®—ãƒ»æ›´æ–° |
| 5 | è‡ªå‹•ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ | `personas/history/` | `total_tasks` ãŒ5ã®å€æ•°ã§ä¿å­˜ |
| 6 | Few-Shotè‡ªå‹•ç™»éŒ² | `knowledge/few_shot_bank/` | GREEN+success ã‚’ç™»éŒ² |

### 7.5 é€²åŒ–ã®é€Ÿåº¦ï¼ˆç›®å®‰ï¼‰

| ãƒ•ã‚§ãƒ¼ã‚º | ã‚¿ã‚¹ã‚¯æ•° | æœŸå¾…ã•ã‚Œã‚‹å¤‰åŒ– |
|---------|---------|-------------|
| åˆ†åŒ–æœŸ | 0-50 | ãƒ‰ãƒ¡ã‚¤ãƒ³ç¿’ç†Ÿåº¦ã«å·®ãŒå‡ºå§‹ã‚ã‚‹ |
| ç‰¹åŒ–æœŸ | 50-200 | specialization_index 0.5è¶…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‡ºç¾ |
| å®‰å®šæœŸ | 200+ | å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ‹ãƒƒãƒãŒç¢ºç«‹ã€‚äº¤å‰ãŒä¸»ãªé€²åŒ–æº |

---

## 8. ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

### 8.1 è¨­è¨ˆæ€æƒ³ï¼šã‚³ãƒãƒ³ãƒ‰è¨­å®šãƒ¢ãƒ‡ãƒ«

TANEBIã¯å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºã‚’ã€Œè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã€ã§å®Ÿç¾ã™ã‚‹ã€‚
TANEBIã‚³ã‚¢å†…éƒ¨ã«ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼åã‚„åˆ†å²ãƒ­ã‚¸ãƒƒã‚¯ã¯å­˜åœ¨ã—ãªã„ã€‚
**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ãŒã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã§ã‚ã‚‹ã€‚**

| è¨­è¨ˆåŸå‰‡ | èª¬æ˜ |
|---------|------|
| AP-1: ã‚³ã‚¢ã¯ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã®ã¿ | DECOMPOSEâ†’EXECUTEâ†’AGGREGATEâ†’EVOLVEã®ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ã«é™å®šã€‚å®Ÿè¡Œæ–¹å¼ãƒ»é€šä¿¡æ‰‹æ®µãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®Ÿè£…ã‚’ä¸€åˆ‡çŸ¥ã‚‰ãªã„ |
| AP-2: è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ | config.yamlã®å„Portã«å…·ä½“çš„ãªã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°ã€‚TANEBIã‚³ã‚¢ã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ç½®æ›ã—ã¦shell execã™ã‚‹ã ã‘ã€‚ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼åãƒ»ifåˆ†å²ã¯ä¸€åˆ‡å­˜åœ¨ã—ãªã„ |
| AP-3: PortãŒå¥‘ç´„ã€ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè£… | TANEBIã¯ã€ŒPortã®å…¥å‡ºåŠ›ã‚¹ã‚­ãƒ¼ãƒã€ã®ã¿ã‚’å®šç¾©ã€‚å®Ÿç¾æ–¹æ³•ã¯config.yamlã®ã‚³ãƒãƒ³ãƒ‰ã«å§”ã­ã‚‹ |
| AP-4: Portå˜ä½ã§ã‚³ãƒãƒ³ãƒ‰ã‚’æ··åˆå¯èƒ½ | Workerèµ·å‹•ã¯Dockerã€Stateä¿å­˜ã¯S3ã€Eventç™ºç«ã¯Redis â€” Portå˜ä½ã§è‡ªç”±ã«æ§‹æˆã§ãã‚‹ |
| AP-5: ãƒ‡ãƒ¼ã‚¿äº¤æ›ã¯YAMLå¥‘ç´„ | Porté–“ã®ãƒ‡ãƒ¼ã‚¿äº¤æ›ã¯å…¨ã¦YAMLã‚¹ã‚­ãƒ¼ãƒã§å®šç¾©ã€‚transportå±¤ã¯Portã®å¤–å´ |

### 8.2 Outbound Portï¼ˆconfig.yaml ã® tanebi.portsï¼‰

TANEBIã‚³ã‚¢ãŒå¤–éƒ¨ã‚’å‘¼ã³å‡ºã™éš›ã«ä½¿ã†Portã€‚

```yaml
tanebi:
  ports:
    worker_launch:
      decompose:
        command: "builtin:task_tool"  # claude-native
        args: {role: decomposer, ...}
      execute:
        command: "builtin:task_tool"
        args: {role: worker, ...}
    event_emit:
      command: "bash scripts/emit_event.sh {event_type} {payload}"
      # æ³¨è¨˜: event_emit Portã®è²¬å‹™ã¯ã€Œå¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¸ã®è»¢é€ãƒ»æ°¸ç¶šåŒ–ã€ã«é™å®šã€‚
      # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¸ã®å†…éƒ¨é…ä¿¡ã¯ component_loader ã®è²¬å‹™ï¼ˆPortå¤–ã®å†…éƒ¨æ©Ÿæ§‹ï¼‰ã€‚
    state_read:
      command: "cat {resource_path}"
    state_write:
      command: "tee {resource_path} > /dev/null"
    knowledge_read:
      command: "ls {knowledge_dir}/{domain}/"
    security_check:
      command: "bash modules/trust/trust_module.sh check {task_type}"
```

ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆ`{persona_file}` ç­‰ï¼‰ã¯ command_executor.sh ãŒå®Ÿå¼•æ•°ã«ç½®æ›ã—ã¦å®Ÿè¡Œã€‚

### 8.3 builtin:task_toolï¼ˆclaude-nativeå°‚ç”¨ï¼‰

Task toolã¯ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã§ã¯ãªãClaude Codeå†…éƒ¨ã®APIã€‚
`builtin:task_tool` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã«ã‚ˆã‚Š command_executor.sh ãŒè­˜åˆ¥ã—ã€
shell execã®ä»£ã‚ã‚Šã«Task toolã‚’ç›´æ¥å‘¼ã¶ï¼ˆæœ€å°ã®å†…éƒ¨åˆ†å²ï¼‰ã€‚

Shell builtinã®é¡æ¨: bashã®cd/echoãŒå¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¨å…±å­˜ã™ã‚‹ã‚ˆã†ã«ã€
builtin:task_toolã¯å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¨å…±å­˜ã™ã‚‹ã€‚
Claude CodeãŒã‚·ã‚§ãƒ«ã‹ã‚‰Task toolã‚’å‘¼ã¹ã‚‹APIã‚’æä¾›ã—ãŸæ™‚ç‚¹ã§builtinã¯æ¶ˆãˆã‚‹ã€‚

### 8.4 Inbound Callbackï¼ˆtanebi-callback.shï¼‰

WorkerãŒçµæœã‚’TANEBIã«è¿”ã™éš›ã«å‘¼ã³å‡ºã™Callbackã€‚
TANEBIãŒæä¾›ã™ã‚‹ scripts/tanebi-callback.sh ã‚’ Worker ãŒå®Ÿè¡Œã™ã‚‹ã ã‘ï¼ˆå›ºå®šAPIä»•æ§˜ï¼‰ã€‚
`tanebi.callbacks` ã¯config.yamlã®è¨­å®šé …ç›®ã§ã¯ãªã„ã€‚

```bash
# ä½¿ç”¨ä¾‹ï¼ˆå…¨ç’°å¢ƒå…±é€šï¼‰
bash scripts/tanebi-callback.sh worker_completed cmd_id=cmd_042 status=success
```

### 8.5 ç’°å¢ƒåˆ¥ã®config.yamlä¾‹

Docker, Lambda, subprocess ç­‰ã®ç’°å¢ƒåˆ¥ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯ docs/adapter-guide.md ã‚’å‚ç…§ã€‚
ï¼ˆadapter-guide.md ã¯ reports/adapter_policy.md Â§5 ã«ç›¸å½“ã™ã‚‹è©³ç´°ã‚¬ã‚¤ãƒ‰ã€‚ï¼‰

### 8.6 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

| Port | å¤±æ•—æ™‚ã®æŒ™å‹• | ãƒªã‚«ãƒãƒªãƒ¼ |
|------|------------|-----------|
| worker_launch.decompose | plan.mdç”Ÿæˆã•ã‚Œãªã„ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¨ãƒ©ãƒ¼å ±å‘Š |
| worker_launch.execute | result YAML `status: failure` | AggregatorãŒé›†è¨ˆã€‚é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ãŒå¤±æ•—è£œæ­£ |
| event_emit | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | éè‡´å‘½çš„ï¼ˆãƒ­ã‚°è¨˜éŒ²ã®ã¿ï¼‰ |
| state_read / state_write | ã‚¨ãƒ©ãƒ¼çµ‚äº† | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¨ãƒ©ãƒ¼å ±å‘Š |
| security_check | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆdenyï¼ˆå®‰å…¨å´ï¼‰ |

å¤±æ•—ã¯ç ´æ£„ã•ã‚Œãªã„ã€‚ã™ã¹ã¦è¨˜éŒ²ã•ã‚Œã€é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—ã«çµ„ã¿è¾¼ã¾ã‚Œã‚‹ã€‚

---

## 9. ãƒ—ãƒªã‚»ãƒƒãƒˆæ§‹æˆ

### 9.1 minimal

åˆå¿ƒè€…ãƒ»ã‚·ãƒ³ãƒ—ãƒ«å¿—å‘å‘ã‘ã€‚

```yaml
# config.yaml
tanebi:
  plugins:
    preset: "minimal"
```

| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | çŠ¶æ…‹ | å‚™è€ƒ |
|-----------|------|------|
| trust | æœ‰åŠ¹ | Core Pluginã€‚å¸¸æ™‚æœ‰åŠ¹ |
| progress | ç„¡åŠ¹ | |
| approval | æœ‰åŠ¹ | plan_review ã®ã¿ |
| cost | ç„¡åŠ¹ | |
| evolution | ç„¡åŠ¹ | é€²åŒ–ã¯è£ã§å‹•ããŒUIéè¡¨ç¤º |
| history | ç„¡åŠ¹ | |

### 9.2 standard

æ—¥å¸¸åˆ©ç”¨å‘ã‘ã€‚é€²æ—ã¨æ‰¿èªã®ãƒãƒ©ãƒ³ã‚¹å‹ã€‚

```yaml
tanebi:
  plugins:
    preset: "standard"
```

| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | çŠ¶æ…‹ | å‚™è€ƒ |
|-----------|------|------|
| trust | æœ‰åŠ¹ | |
| progress | æœ‰åŠ¹ | Personaæƒ…å ±è¡¨ç¤ºã‚ã‚Š |
| approval | æœ‰åŠ¹ | plan_reviewæœ‰åŠ¹ã€wave_gateç„¡åŠ¹ |
| cost | æœ‰åŠ¹ | ã‚µãƒ–ã‚¿ã‚¹ã‚¯åˆ¥ãƒ»ç´¯è¨ˆè¡¨ç¤º |
| evolution | æœ‰åŠ¹ | å®Œäº†æ™‚ã‚µãƒãƒªãƒ¼è¡¨ç¤º |
| history | ç„¡åŠ¹ | CLIã§æ‰‹å‹•ç¢ºèª |

### 9.3 full

ãƒ‘ãƒ¯ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã€‚å…¨æ©Ÿèƒ½æœ‰åŠ¹ã€‚

```yaml
tanebi:
  plugins:
    preset: "full"
```

| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ | çŠ¶æ…‹ | å‚™è€ƒ |
|-----------|------|------|
| trust | æœ‰åŠ¹ | |
| progress | æœ‰åŠ¹ | Few-Shotåˆ©ç”¨çŠ¶æ³ã‚‚è¡¨ç¤º |
| approval | æœ‰åŠ¹ | plan_review + wave_gateæœ‰åŠ¹ |
| cost | æœ‰åŠ¹ | Personaåˆ¥ã‚³ã‚¹ãƒˆè¡¨ç¤º |
| evolution | æœ‰åŠ¹ | è©³ç´°+fitnessæ¨ç§»è¡¨ç¤º |
| history | æœ‰åŠ¹ | è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹+æ¤œç´¢ |

### 9.4 config.yaml å®Œå…¨æ§‹é€ 

```yaml
tanebi:
  version: "1.0"

  # === Outbound Portï¼ˆTANEBIã‚³ã‚¢ãŒå¤–éƒ¨ã‚’å‘¼ã¶ï¼‰ ===
  ports:
    worker_launch:
      decompose:
        command: "builtin:task_tool"
        timeout: 120
        args:
          instructions: |
            You are TANEBI Decomposer.
            Read the request at {request_file}.
            Available personas: {persona_list}.
            Create a decomposition plan and write to {plan_output}.
          max_turns: 10
      execute:
        command: "builtin:task_tool"
        timeout: 600
        args:
          instructions: |
            You are TANEBI Worker with persona {persona_file}.
            Complete the subtask defined in {subtask_file}.
            Reference few-shot examples: {few_shot_files}.
            Write your result to {output_path}.
          max_turns: 20
      execute_wave:
        timeout: 900
    event_emit:
      command: "bash scripts/emit_event.sh {work_dir}/{cmd_id} {event_type} {payload}"
    state_read:
      command: "cat {resource_path}"
    state_write:
      command: "tee {resource_path} > /dev/null"
    knowledge_read:
      command: "ls knowledge/few_shot_bank/{domain}/ | head -n {limit}"
    security_check:
      command: "bash modules/trust/trust_module.sh on_task_assign {persona_id} {risk_level}"
    security_update:
      command: "bash modules/trust/trust_module.sh on_task_complete {persona_id}"

  # === Inbound Callback ===
  # callbacksã¯config.yamlè¨­å®šé …ç›®ã§ã¯ãªãå›ºå®šAPIä»•æ§˜ã€‚
  # Workerã¯ bash scripts/tanebi-callback.sh <event_type> [key=value ...] ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã€‚
  # è©³ç´°ã¯ adapter-guide.md Section 6 ã‚’å‚ç…§ã€‚

  # === ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š ===
  plugins:
    preset: "standard"         # minimal | standard | full | custom

    # customæ™‚ã®å€‹åˆ¥è¨­å®š
    trust:
      enabled: true
    progress:
      enabled: true
    approval:
      enabled: true
      plan_review: true
      wave_gate: false
      timeout_seconds: null
      danger_op_confirm: true
    cost:
      enabled: true
      budget: null
      show_per_subtask: true
      show_cumulative: true
    evolution:
      enabled: true
      show_on_complete: true
      verbose: false
    history:
      enabled: false
      auto_index: true

  # === ãƒ‘ã‚¹è¨­å®š ===
  paths:
    work_dir: "work"
    persona_dir: "personas/active"
    library_dir: "personas/library"
    history_dir: "personas/history"
    knowledge_dir: "knowledge"
    few_shot_dir: "knowledge/few_shot_bank"
    episode_dir: "knowledge/episodes"

  # === å®Ÿè¡Œè¨­å®š ===
  execution:
    max_parallel_workers: 5
    worker_max_turns: 30
    default_model: "claude-sonnet-4-6"

  # === é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³è¨­å®š ===
  evolution:
    fitness_weights:
      quality_score: 0.35
      completion_rate: 0.30
      efficiency: 0.20
      growth_rate: 0.15
    fitness_window: 20
    few_shot_max_per_domain: 20
    snapshot_interval: 5
```

---

## 10. Post-MVPãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: çµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ + progress + approval

**ç›®æ¨™**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å®Ÿè£…ã—ã€progress ã¨ approval ã‚’å‹•ä½œã•ã›ã‚‹ã€‚

**æˆæœç‰©**:
- `scripts/emit_event.sh` â€” ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
- `scripts/component_loader.sh` â€” ãƒ—ãƒ©ã‚°ã‚¤ãƒ³èª­ã¿è¾¼ã¿ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- `scripts/send_feedback.sh` â€” ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡
- `events/schema.yaml` â€” ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- `plugins/progress/` â€” progressãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- `plugins/approval/` â€” approvalãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- `plugins/_template/` â€” ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- CLAUDE.mdæ”¹ä¿® â€” Decomposeå¾Œã®æ‰¿èªã‚²ãƒ¼ãƒˆçµ„ã¿è¾¼ã¿
- `templates/worker_base.md` æ”¹ä¿® â€” `worker.progress` ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«è¿½åŠ 
- config.yamlæ”¹ä¿® â€” `plugins` ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 

### Phase 2: cost + evolutionå¯è¦–åŒ–

**ç›®æ¨™**: cost ã¨ evolution ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè£…ã—ã€TANEBIã®ç‹¬è‡ªä¾¡å€¤ã‚’å¯è¦–åŒ–ã™ã‚‹ã€‚

**æˆæœç‰©**:
- `plugins/cost/` â€” costãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- `plugins/evolution/` â€” evolutionãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- `scripts/estimate_cost.sh` â€” ãƒˆãƒ¼ã‚¯ãƒ³æ¨å®š
- `tanebi` CLIæ‹¡å¼µ â€” `tanebi evolution`, `tanebi cost` ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰
- `evolve.sh` æ”¹ä¿® â€” `evolution.*` ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«è¿½åŠ 
- Persona YAMLã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ â€” `performance.cost_metrics` è¿½åŠ 
- `work/cmd_NNN/cost.yaml` â€” ã‚¿ã‚¹ã‚¯æ¯ã‚³ã‚¹ãƒˆè¨˜éŒ²

**å‰ææ¡ä»¶**: Phase 1 å®Œäº†

### Phase 3.5: ã‚³ãƒãƒ³ãƒ‰è¨­å®šãƒ¢ãƒ‡ãƒ«åŸºç›¤æ§‹ç¯‰

**ç›®æ¨™**: ã‚³ãƒãƒ³ãƒ‰è¨­å®šãƒ¢ãƒ‡ãƒ«ã®åŸºç›¤ã‚’å®Ÿè£…ã—ã€config.yamlã®Portå®šç¾©ã§ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ§‹æˆã‚’æ±ºå®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**æˆæœç‰©**:
- `scripts/command_executor.sh` â€” ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ç½®æ› + shell execï¼‰
- `scripts/tanebi-callback.sh` â€” Inbound Callbackã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆWorkerâ†’TANEBIã¸ã®é€šçŸ¥ï¼‰
- config.yaml ã¸ã® `tanebi.ports` ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
- `builtin:task_tool` ãƒ¡ã‚«ãƒ‹ã‚ºãƒ å®Ÿè£…ï¼ˆclaude-nativeç”¨ï¼‰
- docs/ å†æ§‹æˆï¼ˆadapter-guide.mdæ˜‡æ ¼ï¼‰
- Python venv åŸºç›¤

**å‰ææ¡ä»¶**: Phase 2 å®Œäº†

### Phase 3 â†’ Phase 4 ã«ç¹°ã‚Šä¸Šã’: history + CLIæ•´å‚™

**ç›®æ¨™**: historyãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ `tanebi` CLIã®å……å®Ÿã€‚

**æˆæœç‰©**:
- `plugins/history/` â€” historyãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- `work/index.yaml` â€” ã‚¿ã‚¹ã‚¯å±¥æ­´ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- `tanebi` CLI:
  - `tanebi history [cmd_id]`
  - `tanebi persona list / inspect / clone / merge`
  - `tanebi config <key> <value>`
  - `tanebi status`

**å‰ææ¡ä»¶**: Phase 2 å®Œäº†

### Phase 5: ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼ + ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ 

**ç›®æ¨™**: Workerå¤±æ•—æ™‚ã®è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚µãƒãƒ¼ãƒˆã€‚

**æˆæœç‰©**:
- ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼: Workerå¤±æ•— â†’ åŒPersonaå†è©¦è¡Œï¼ˆæœ€å¤§1å›ï¼‰ â†’ generalistãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- Waveé–“ã‚²ãƒ¼ãƒˆæœ¬æ ¼å®Ÿè£…: plan.yamlã« `approval_gate: true` ã‚’å®£è¨€çš„å®šç¾©
- Few-Shot Bankæ¤œç´¢æ€§å‘ä¸Š: `knowledge/few_shot_bank/index.yaml` ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ :
  - `tanebi plugin install <url>`
  - `tanebi plugin create <name>`
  - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼

**å‰ææ¡ä»¶**: Phase 4 å®Œäº†

---

## 11. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
tanebi/
â”œâ”€â”€ CLAUDE.md                       # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼å®šç¾©
â”œâ”€â”€ config.yaml                     # å…¨ä½“è¨­å®š
â”‚
â”œâ”€â”€ personas/
â”‚   â”œâ”€â”€ active/                     # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–Persona
â”‚   â”‚   â”œâ”€â”€ generalist_v1.yaml
â”‚   â”‚   â””â”€â”€ backend_specialist_v2.yaml
â”‚   â”œâ”€â”€ library/                    # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ»ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
â”‚   â”‚   â””â”€â”€ seeds/
â”‚   â”‚       â”œâ”€â”€ backend_seed.yaml
â”‚   â”‚       â”œâ”€â”€ frontend_seed.yaml
â”‚   â”‚       â”œâ”€â”€ testing_seed.yaml
â”‚   â”‚       â”œâ”€â”€ docs_seed.yaml
â”‚   â”‚       â””â”€â”€ devops_seed.yaml
â”‚   â””â”€â”€ history/                    # è‡ªå‹•ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
â”‚
â”œâ”€â”€ knowledge/
â”‚   â”œâ”€â”€ few_shot_bank/              # æˆåŠŸäº‹ä¾‹ãƒãƒ³ã‚¯
â”‚   â”‚   â”œâ”€â”€ backend/
â”‚   â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â””â”€â”€ testing/
â”‚   â””â”€â”€ episodes/                   # ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰è¨˜éŒ²
â”‚
â”œâ”€â”€ work/                           # ã‚¿ã‚¹ã‚¯ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ cmd_001/
â”‚   â”‚   â”œâ”€â”€ request.md              # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾é ¼
â”‚   â”‚   â”œâ”€â”€ plan.md                 # Decomposerå‡ºåŠ›
â”‚   â”‚   â”œâ”€â”€ results/                # Workerå‡ºåŠ›
â”‚   â”‚   â”‚   â”œâ”€â”€ subtask_001.md
â”‚   â”‚   â”‚   â””â”€â”€ subtask_002.md
â”‚   â”‚   â”œâ”€â”€ report.md               # Aggregatorçµ±åˆãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ events/                 # ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°
â”‚   â”‚   â”‚   â”œâ”€â”€ 001_task.created.yaml
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ feedback/               # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ cost.yaml               # ã‚³ã‚¹ãƒˆè¨˜éŒ²
â”‚   â””â”€â”€ index.yaml                  # ã‚¿ã‚¹ã‚¯å±¥æ­´ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
â”‚
â”œâ”€â”€ plugins/                        # çµ±ä¸€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
â”‚   â”œâ”€â”€ trust/                      # type: core
â”‚   â”‚   â”œâ”€â”€ plugin.yaml
â”‚   â”‚   â”œâ”€â”€ handler.sh
â”‚   â”‚   â””â”€â”€ config.yaml
â”‚   â”œâ”€â”€ progress/                   # type: ui
â”‚   â”œâ”€â”€ approval/
â”‚   â”œâ”€â”€ cost/
â”‚   â”œâ”€â”€ evolution/
â”‚   â”œâ”€â”€ history/
â”‚   â””â”€â”€ _template/
â”‚
â”œâ”€â”€ events/
â”‚   â””â”€â”€ schema.yaml                 # ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚­ãƒ¼ãƒå®šç¾©
â”‚
â”œâ”€â”€ templates/                      # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ decomposer.md
â”‚   â”œâ”€â”€ worker_base.md
â”‚   â””â”€â”€ aggregator.md
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ new_cmd.sh                  # ã‚¿ã‚¹ã‚¯ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
â”‚   â”œâ”€â”€ command_executor.sh         # ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆPortâ†’shell execï¼‰
â”‚   â”œâ”€â”€ tanebi-callback.sh          # Inbound Callbackã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ evolve.sh                   # é€²åŒ–ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè¡Œ
â”‚   â”œâ”€â”€ _evolve_helper.py           # é€²åŒ–ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ _fitness.py                 # é©å¿œåº¦é–¢æ•°
â”‚   â”œâ”€â”€ persona_ops.sh              # Personaæ“ä½œï¼ˆclone/mergeï¼‰
â”‚   â”œâ”€â”€ emit_event.sh               # ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
â”‚   â”œâ”€â”€ component_loader.sh         # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ send_feedback.sh            # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é€ä¿¡
â”‚   â”œâ”€â”€ estimate_cost.sh            # ã‚³ã‚¹ãƒˆæ¨å®š
â”‚   â””â”€â”€ tanebi_config.sh            # ãƒ‘ã‚¹å®šæ•°
â”‚
â”œâ”€â”€ modules/                        # Core Pluginã®å®Ÿè£…
â”‚   â””â”€â”€ trust/
â”‚       â””â”€â”€ trust_module.sh
â”‚
â”œâ”€â”€ adapters/                       # å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆç½®ãå ´ï¼ˆä»»æ„ï¼‰
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ design.md                   # æœ¬æ–‡æ›¸
    â”œâ”€â”€ adapter-guide.md            # ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ§‹æˆã‚¬ã‚¤ãƒ‰ï¼ˆç’°å¢ƒåˆ¥config.yamlä¾‹ï¼‰
    â””â”€â”€ archive/                    # æ—§è¨­è¨ˆæ–‡æ›¸ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
```
